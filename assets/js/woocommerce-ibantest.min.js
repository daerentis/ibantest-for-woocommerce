jQuery(function(a){if("undefined"==typeof ibantest_params)return!1;var t={documentReady:function(){a(document).on("change keyup",".transform-uppercase",function(){var t=a(this).val().replace(/ /g,"");t=t.replace(/[^\w\d]/g,""),a(this).val(t.toUpperCase())}),a(document).on("focusout","#ibantest-account-iban",function(){return""!=a(this).val().replace(/ /g,"")&&t.validateIban(),!1}),a(document).on("click","#show-sepa-mandate-trigger",function(e){return e.preventDefault(),a("a#show-sepa-mandate-pretty").prettyPhoto({social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1}),t.showSepaMandate(),!1})},validateIban:function(){a.ajax({type:"POST",url:ibantest_params.validate_iban_url,data:{iban:a("#ibantest-account-iban").val(),nonce:ibantest_params.validate_iban_nonce},dataType:"json",cache:!1,context:this,success:function(t){void 0!==t&&(1==t.valid||1==t.error?(a(".form-row.account-bic").show(),a("#ibantest-account-iban-error").text("").hide(),t.bic?a("#ibantest-account-bic").val(t.bic).prop("readonly",!0):(a("#ibantest-account-bic").val("").prop("readonly",!1),a("#ibantest-account-bank").text("").hide()),t.bankName&&a("#ibantest-account-bank").text(t.bankName).show()):0==t.valid&&(a("#ibantest-account-bank").text(),a("#ibantest-account-bic").val("").prop("readonly",!1),a(".form-row.account-bic").hide(),t.message&&a("#ibantest-account-iban-error").text(t.message).show()))},error:function(a){},complete:function(a){}})},showSepaMandate:function(){a.ajax({type:"POST",url:ibantest_params.show_sepa_mandate_url,data:{checkout:a("form.checkout").serialize(),nonce:ibantest_params.show_sepa_mandate_nonce},dataType:"json",cache:!1,context:this,success:function(t){a("#show-sepa-mandate-pretty-content").html(t),a("#show-sepa-mandate-pretty").trigger("click")},error:function(a){},complete:function(a){}})},init:function(){a(document).ready(t.documentReady)}};t.init()});